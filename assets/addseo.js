function run(){var e=document.querySelector("link[rel='canonical']").getAttribute("href");let t=setUpQuery(e);fetch(t).then(t=>{if(t.ok)return t.json();document.getElementById("loadingcard").classList.add("d-none"),document.getElementById("nowidget").classList.remove("d-none"),document.getElementById("nowidget_link").innerHTML='<a href="https://pagespeed.web.dev/report?url='+e+'">See full results</a>'}).then(t=>{document.getElementById("pglink").innerHTML='<a href="https://pagespeed.web.dev/report?url='+e+'">See full results</a>';let s=t.lighthouseResult.categories;showMetric(100*s.performance.score,"p"),showMetric(100*s.accessibility.score,"a"),showMetric(100*s["best-practices"].score,"bp"),showMetric(100*s.seo.score,"s"),document.getElementById("loadingcard").classList.add("d-none"),document.getElementById("resultcard").classList.remove("d-none")}).catch(e=>{console.log(e)})}function showMetric(e,t){let s="high";e<70?s="fail":e<86&&(s="mid");var r=document.getElementById(t+"_gauge");r.getElementsByClassName("base")[0].classList.add("base_"+s);var a=r.getElementsByClassName("arc")[0];a.classList.add("arc_"+s),a.setAttribute("stroke-dasharray",329*e/100+" 329");var n=r.getElementsByClassName("text")[0];n.classList.add("text_"+s),n.innerHTML=e}function setUpQuery(e){var t="https://www.googleapis.com/pagespeedonline/v5/runPagespeed?url="+encodeURIComponent(e)+"&category=ACCESSIBILITY&category=BEST_PRACTICES&category=PERFORMANCE&category=SEO&key",t=t+"=AIzaSyC7unLuCp4eR9dL6YTVF17Quzxx0RC0aF8";return t}run();