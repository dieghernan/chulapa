---
layout: null
---
/* Demo for docs. Don't use this script on production */
{% assign maxwords = site.search.simplesearch_maxwords | default: "30"  %}
{%- assign indexsimple = site.pages | concat: site.documents |  where_exp:'doc','doc.include_on_search != false' -%}

[
  {% for doc in indexsimple %}
	{%- assign myimg = doc.og_image | default: doc.header_img  -%}
    {
		"title": {{ doc.title | jsonify }},
        "subtitle": {{ doc.subtitle | jsonify }},
		"excerpt": {{ doc.content | newline_to_br |
              replace:"<br />", " " |
              replace:"</p>", " " |
              replace:"</h1>", " " |
              replace:"</h2>", " " |
              replace:"</h3>", " " |
              replace:"</h4>", " " |
              replace:"</h5>", " " |
              replace:"</h6>", " "|
            strip_html | strip_newlines | truncatewords: maxwords | jsonify }},
        "categories": {{ doc.categories | join: ', ' | jsonify }},
        "date": {{ doc.date | date: "%Y-%m-%d" | jsonify }},
        "tags": {{ doc.tags | join: ', ' | jsonify }},
        "url": {{ doc.url | absolute_url | escape | jsonify }},
	  {% if myimg -%}
		"img": ":url('{{ myimg | absolute_url | escape }}')"
	  {%- else -%}
		"img": ": none"
	  {%- endif %}	
    } {% unless forloop.last %},{% endunless %}
  {% endfor %}