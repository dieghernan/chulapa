---
layout: null
comment:  Demo for docs. Don't use this script on production 
---

{% assign maxwords = site.search.simplesearch_maxwords | default: "30"  %}
{%- assign indexsimple = site.pages | concat: site.documents |  where_exp:'doc','doc.include_on_search != false' -%}

[
  {% for doc in indexsimple %}
	{%- assign myimg = doc.og_image | default: doc.header_img  -%}
    {
		"title": {{ doc.title | strip_html | jsonify }},
    "subtitle": {{ doc.subtitle | strip_html | jsonify }},
    "excerpt": {{ doc.content | newline_to_br |
              replace:"<br />", " " |
              replace:"</p>", " " |
              replace:"</h1>", " " |
              replace:"</h2>", " " |
              replace:"</h3>", " " |
              replace:"</h4>", " " |
              replace:"</h5>", " " |
              replace:"</h6>", " "|
            strip_html | strip_newlines | truncatewords: maxwords | jsonify }},
    "prev": {{ doc.content | newline_to_br |
              replace:"<br />", " " |
              replace:"</p>", " " |
              replace:"</h1>", " " |
              replace:"</h2>", " " |
              replace:"</h3>", " " |
              replace:"</h4>", " " |
              replace:"</h5>", " " |
              replace:"</h6>", " "|
            strip_html | strip_newlines | truncatewords: 10 | jsonify }},
    "categories": {{ doc.categories | join: ', ' | strip_html  | jsonify }},
    "date": {{ doc.date | date: "%Y-%m-%d" | strip_html | jsonify }},
    "tags": {{ doc.tags | join: ', ' | strip_html | jsonify }},
    "url": {{ doc.url | absolute_url | escape | jsonify }},
รง	  {% if myimg -%}
		"img": ":url('{{ myimg | absolute_url | escape }}')"
	  {%- else -%}
		"img": ": none"
	  {%- endif %}	
    } {% unless forloop.last %},{% endunless %}
  {% endfor %}
]